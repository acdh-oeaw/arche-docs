<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Dissemination services | ARCHE documentation</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Dissemination services" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Documentation for the ARCHE repository solution." />
<meta property="og:description" content="Documentation for the ARCHE repository solution." />
<link rel="canonical" href="/arche-docs/aux/dissemination_services.html" />
<meta property="og:url" content="/arche-docs/aux/dissemination_services.html" />
<meta property="og:site_name" content="ARCHE documentation" />
<script type="application/ld+json">
{"description":"Documentation for the ARCHE repository solution.","@type":"WebPage","headline":"Dissemination services","url":"/arche-docs/aux/dissemination_services.html","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/arche-docs/assets/main.css"><link type="application/atom+xml" rel="alternate" href="/arche-docs/feed.xml" title="ARCHE documentation" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/arche-docs/">ARCHE documentation</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/arche-docs/aux/metadata_api_performance.Rmd">Metadata API performance</a><a class="page-link" href="/arche-docs/aux/dissemination_services.html">Dissemination services</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Dissemination services</h1>
  </header>

  <div class="post-content">
    <h1 id="dissemination-services">Dissemination services</h1>

<h2 id="introduction">Introduction</h2>

<p>The way data are stored in arche is quite often not suitable for direct use, especially by humans. Who wants to browse trough metadata in raw RDF? Or view a book as a raw TEI-XML?</p>

<p>Dissemination services address this issue by providing transformations of arche resources into formats useful for dissemination, e.g. render TEI-XML into an HTML webpage a human being can esily view or transform RDF metadata into a BibLaTeX bibliographic entry you can use in you bibliography management software.</p>

<p>It’s worth noting that in most cases it’s not feasible to avoid dissemination services by putting resources being already in dissemnation-friendly formats into the arche.
First, there are typically plenty of dissemination formats we want to offer and this would bring a lot of data duplication and all problems connected with the data duplication (most importantly issues with keeping copies in sync and data volume issues). Second, this would make long term maintenance troublesome as once we want to adjust a given dissemination format we need to reprocess all repository resources (in technical terms we would say it breaks the separation between data and presentation).</p>

<h2 id="definitions">Definitions</h2>

<p>In the spoken language a <em>dissemination service</em> has two meanings which are used interchangeable:</p>

<ol>
  <li>The service providing the transformation.\
This is the technically correct meaning.
    <ul>
      <li>It’s worth noting that from arche architecture point of view the repository browsing GUI or the OAI-PMH endpoint are also <em>dissemination services</em> in this meaning
(the first one disseminates metadata as a webpage and the latter one transforms resource’s arche metadata into OAI-PMH metadata).</li>
    </ul>
  </li>
  <li>A set of rules describing which dissemination services (in the 1st meaning) are availble for a given resource.\
To avoid confusion this is called a <em>mapping</em> below.</li>
</ol>

<h2 id="architecture">Architecture</h2>

<ul>
  <li><em>Dissemination services</em> just work on their own.\
The only requirement is it must be possible to describe them using the <em>mapping</em> data model.</li>
  <li>The <a href="https://github.com/acdh-oeaw/arche-lib-disserv">arche-lib-disserv</a>:
    <ul>
      <li>Determines the <em>mappings</em> data model.</li>
      <li>Implements the <em>mappings</em> data model allowing to match <em>dissemination services</em> with arche resources and vice versa.</li>
    </ul>
  </li>
  <li>The <a href="https://github.com/acdh-oeaw/arche-resolver">arche-resolver</a> uses arche-lib-disserv to find a <em>dissemination service</em> best fulfilling the user request
(as specified by user request’s <code class="language-plaintext highlighter-rouge">Accept</code> HTTP header or <code class="language-plaintext highlighter-rouge">format</code> parameter) and redirects the user to the <em>dissemination service</em>.</li>
</ul>

<p>It’s worth noting that the <a href="https://github.com/acdh-oeaw/arche-core">arche-core</a> is not aware of <em>dissemination services</em>.
The whole <em>dissemination service</em> logic is provided by higher layers of the arche software stack: arche-lib-disserv and arche-resolver.</p>

<h2 id="dissemination-service">Dissemination service</h2>

<p>Dissemination service in arche is any web service able to consume data stored in arche.</p>

<p>It can be hosted anywhere. It doesn’t matter if it can deal only with arche resources or also with other data.
It just has to be reachable using an HTTP GET request and it must be able to fetch an arche resource on its own (e.g. from an URL passed to it as a part of the GET request).</p>

<h2 id="mappings-data-model">Mappings data model</h2>

<p><em>(Dissemination service) mappings</em> is a set of rules for:</p>

<ol>
  <li>Matching arche resources with <em>dissemination services</em> able to transform them.</li>
  <li>Generating an HTTP request to the <em>dissemination service</em> based on the arche resource metadata.</li>
</ol>

<p>The data model for both is determined by the <a href="https://github.com/acdh-oeaw/arche-lib-disserv">arche-lib-disserv</a> library.</p>

<p>Mappings are defined in RDF and represented in the arche as a set of (pretty ordinary) resources.</p>

<p>It means you prepare mappings definitions as an RDF file and ingest them into arche as any other set of metadata.</p>

<p>The arche-lib-disserv doesn’t enforce any particular RDF property names but it means you must choose them on your own and define them in a config file.
In examples below a <code class="language-plaintext highlighter-rouge">cfg.schema.dissServ.propertyCfgName</code> syntax will be used to denote RDF properties to be defined by you.</p>

<p>An extensive example of the mappings can be found <a href="https://github.com/acdh-oeaw/arche-docker-config/blob/arche/initScripts/dissServices.ttl">here</a>
with RDF property mappings being defined <a href="https://github.com/acdh-oeaw/arche-docker-config/blob/arche/yaml/schema.yaml">here</a>.</p>

<h3 id="matching-resources-with-dissemination-services">Matching resources with dissemination services</h3>

<p>Matching is done based on matching rules:</p>

<ul>
  <li>Every rule defines a metadata property and, optionally, a value.
    <ul>
      <li>If a value is provided, the rule is matched if a given arche resource has a given value of a given metadata property.</li>
      <li>If a value isn’t defined, the rule is matched if a given arche resource has a given metadata property (with any value).</li>
      <li>Both the property URI and the optional value should be provided as RDF literals (see examples below).</li>
    </ul>
  </li>
  <li>Every rule can be <em>optional</em> or <em>required</em>.\
For an arche resource to match a given <em>dissemination service</em>:
    <ul>
      <li>The resource has to match all <em>required</em> mapping rules.</li>
      <li>And if there is at least one <em>optional</em> mapping rule, the resource has to match at least one <em>optional</em> mapping rule.</li>
    </ul>
  </li>
  <li>Every rule points to the dissemination service with the <code class="language-plaintext highlighter-rouge">cfg.schema.dissServ.parent</code> RDF property.</li>
</ul>

<p>The matching rules system is a compromise between flexibility and complexity.
While it allows to handle most common scenarios, it can’t express complex rules (e.g. with multiple indpendent alternatives like <code class="language-plaintext highlighter-rouge">(A or B) and (C or D)</code>).</p>

<p>Examples:</p>

<ul>
  <li>Mapping rule matching all resources of a given RDF class:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;mappingRuleURI&gt; cfg.schema.dissServ.parent        &lt;https://myDissServ/URI&gt; ;
                 cfg.schema.dissServ.matchProperty "http://www.w3.org/1999/02/22-rdf-syntax-ns#type" ;
                 cfg.schema.dissServ.matchValue    "https://myClass/URI" ;
                 cfg.schema.dissServ.matchRequired "true"^^&lt;http://www.w3.org/2001/XMLSchema#boolean&gt; .
</code></pre></div>    </div>
  </li>
  <li>Mapping rule matching all resources having a given property
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;mappingRuleURI&gt; cfg.schema.dissServ.parent        &lt;https://myDissServ/URI&gt; ;
                 cfg.schema.dissServ.matchProperty "https://myProperty/URI" ;
                 cfg.schema.dissServ.matchRequired "true"^^&lt;http://www.w3.org/2001/XMLSchema#boolean&gt; .
</code></pre></div>    </div>
  </li>
  <li>Set of mapping rules matching any of a given set of values (here a mime type suggesting an image):
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;mappingRuleURI1&gt; cfg.schema.dissServ.parent        &lt;https://myDissServ/URI&gt; ;
                  cfg.schema.dissServ.matchProperty "https://property/storing/mimeType" ;
                  cfg.schema.dissServ.matchValue    "image/tiff" ;
                  cfg.schema.dissServ.matchRequired "false"^^&lt;http://www.w3.org/2001/XMLSchema#boolean&gt; .
&lt;mappingRuleURI2&gt; cfg.schema.dissServ.parent        &lt;https://myDissServ/URI&gt; ;
                  cfg.schema.dissServ.matchProperty "https://property/storing/mimeType" ;
                  cfg.schema.dissServ.matchValue    "image/jpeg" ;
                  cfg.schema.dissServ.matchRequired "false"^^&lt;http://www.w3.org/2001/XMLSchema#boolean&gt; .
&lt;mappingRuleURI3&gt; cfg.schema.dissServ.parent        &lt;https://myDissServ/URI&gt; ;
                  cfg.schema.dissServ.matchProperty "https://property/storing/mimeType" ;
                  cfg.schema.dissServ.matchValue    "image/png" ;
                  cfg.schema.dissServ.matchRequired "false"^^&lt;http://www.w3.org/2001/XMLSchema#boolean&gt; .  
</code></pre></div>    </div>
  </li>
  <li>Combining required and optional rules:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;mappingRuleURI1&gt; cfg.schema.dissServ.parent        &lt;https://myDissServ/URI&gt; ;
                  cfg.schema.dissServ.matchProperty "http://www.w3.org/1999/02/22-rdf-syntax-ns#type" ;
                  cfg.schema.dissServ.matchValue    "https://myClass/URI" ;
                  cfg.schema.dissServ.matchRequired "true"^^&lt;http://www.w3.org/2001/XMLSchema#boolean&gt; .
&lt;mappingRuleURI2&gt; cfg.schema.dissServ.parent        &lt;https://myDissServ/URI&gt; ;
                  cfg.schema.dissServ.matchProperty "https://property/storing/mimeType" ;
                  cfg.schema.dissServ.matchValue    "image/jpeg" ;
                  cfg.schema.dissServ.matchRequired "false"^^&lt;http://www.w3.org/2001/XMLSchema#boolean&gt; .
&lt;mappingRuleURI3&gt; cfg.schema.dissServ.parent        &lt;https://myDissServ/URI&gt; ;
                  cfg.schema.dissServ.matchProperty "https://property/storing/mimeType" ;
                  cfg.schema.dissServ.matchValue    "image/png" ;
                  cfg.schema.dissServ.matchRequired "false"^^&lt;http://www.w3.org/2001/XMLSchema#boolean&gt; .  
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="dissemination-service-request-url-generation">Dissemination service request URL generation</h3>

<p>The second part of</p>

<h2 id="using-arche-lib-disserv">Using arche-lib-disserv</h2>

<h3 id="dissemination-services-matching-a-given-arche-resource">Dissemination services matching a given arche resource</h3>

<h3 id="arche-resources-matching-a-given-dissemination-service">Arche resources matching a given dissemination service</h3>


  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/arche-docs/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">ARCHE documentation</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">ARCHE documentation</li><li><a class="u-email" href="mailto:mateusz.zoltak@oeaw.ac.at">mateusz.zoltak@oeaw.ac.at</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/achd-oeaw"><svg class="svg-icon"><use xlink:href="/arche-docs/assets/minima-social-icons.svg#github"></use></svg> <span class="username">achd-oeaw</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Documentation for the ARCHE repository solution.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
